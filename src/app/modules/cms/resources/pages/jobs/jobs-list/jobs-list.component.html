<div class="row">
    <div class="col-sm">
        <h2>Jobs</h2>
        <button routerLink="/admin/carers/add" class="btn-success right btn-nav">Add jobs</button>
    </div>
</div>
<br><br>
<div [formGroup]="form">
    <div class="row">
        <div class="col-3">
            <label>Review filter</label>
            <select formControlName="review" class="form-control">
                <option value="ALL">All</option>
                <option value="NONE">Posted</option>
                <option value="PENDING">Pending</option>
                <option value="PUBLISHED">Published</option>
                <option value="ARCHIVED">Archived</option>
            </select>
        </div>
        <div class="col-2">
            <button (click)="onFilter('reviewStatus', form.get('review').value)" class="btn-success btn-small">Go</button>
        </div>

        <div class="col-3">
            <label>Manual booking filter</label>
            <select formControlName="manual_booking" class="form-control">
                <option value="ALL">All</option>
                <option value="ENABLED">Enabled</option>
                <option value="DISABLED">Disabled</option>
            </select>
        </div>
        <div class="col-2">
            <button (click)="onFilter('manualBooking', form.get('manual_booking').value)" class="btn-success btn-small">Go</button>
        </div>
    </div>
    <br>
    <div class="row">
        <div class="col-3">
            <label>Search</label>
            <input formControlName="search" type="text" placeholder="Search" class="form-control">
        </div>
        <div class="col-3">
            <label>Status filter</label>
            <select formControlName="status" class="form-control">
                <option value="ALL">All</option>
                <option value="POSTED">Posted</option>
                <option value="EXPIRED">Expired</option>
                <option value="ACCEPTED">Accepted</option>
                <option value="PENDING_PAYMENT">Pending payment</option>
                <option value="CHALLENGED">Challenged</option>
                <option value="PAYMENT_CANCELLED">Payment challenged</option>
                <option value="PAID">Paid</option>
                <option value="PAYMENT_REJECTED">Payment rejected</option>
                <option value="CANCELLED">Cancelled</option>
            </select>
        </div>
        <div class="col-2">
            <button (click)="onFilter('jobStatus', form.get('status').value)" class="btn-success btn-small">Go</button>
        </div>
    </div>
</div>
<br>

<div class="row">
    <div class="col-sm">
        <p *ngIf="jobs.length === 0">No results</p>
        <table *ngIf="jobs.length !==0" class="custom-table text-center">
            <thead>
            <tr>
                <th>Job ID</th>
                <th>Time booked</th>
                <th>Care home</th>
                <th>Post code</th>
                <th>Carer</th>
                <th>Start date</th>
                <th>From</th>
                <th>Till</th>
                <th>Job status</th>
                <th>Total charge</th>
                <th>Includes manual booking charge</th>
                <th>Review status</th>
                <th>More</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let job of jobs">
                <td>{{ job._id }}</td>
                <td>{{ job.created | timestamp }}</td>
                <td>{{ job.author.care_home.name }}</td>
                <td>{{ job.author.address.postal_code }}</td>
                <td>{{ job?.carer?.carer.first_name }} {{ job?.carer?.carer.surname }}</td>
                <td>{{ job.start_date | timestamp }}</td>
                <td>{{ job.start_date | timestampHour }}</td>
                <td>{{ job.end_date | timestampHour }}</td>
                <td>{{ job.status }}</td>
                <td>Mock</td>
                <td>{{ job.manual_booking }}</td>
                <td>{{ job?.review?.status }}</td>
                <td>
                    <span class="actions">Details</span>
                </td>
            </tr>
            </tbody>
        </table>
        <br>
        <div *ngIf="pages.length > 1" class="text-center">
            <nav aria-label="Page navigation example">
                <ul class="pagination">
                    <li
                            *ngFor="let p of pages"
                            [ngClass]="{'active': page === p + 1}"
                            class="page-item">
                        <a
                                (click)="onPageChange(p + 1)"
                                class="page-link">{{ p + 1 }}</a></li>
                </ul>
            </nav>
        </div>
    </div>
</div>